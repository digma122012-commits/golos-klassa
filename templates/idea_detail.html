{% extends "base.html" %}
{% block content %}
<div class="container">
    <a href="{{ url_for('index') }}" class="back">‚Üê –í—Å–µ –∏–¥–µ–∏</a>
    <div class="theme-badge">{{ idea.custom_theme if idea.theme == '–î—Ä—É–≥–æ–µ' and idea.custom_theme else idea.theme }}</div>
    <h2>{{ idea.text }}</h2>
    {% if idea.file_mime and idea.file_mime.startswith('image/') %}
        <img src="{{ url_for('preview_file', idea_id=idea.id) }}" class="media-preview">
    {% elif idea.file_mime and idea.file_mime.startswith('video/') %}
        <video controls playsinline class="media-preview" src="{{ url_for('preview_file', idea_id=idea.id) }}"></video>
    {% endif %}
    <a href="{{ url_for('download_file', idea_id=idea.id) }}" class="download-btn">üíæ –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª</a>
    <p><strong>–ì–æ–ª–æ—Å–æ–≤ –∑–∞ –∏–¥–µ—é:</strong> {{ idea.votes }}</p>
    <h3>–û—Ç–≤–µ—Ç—ã ({{ replies|length }})</h3>
    {% for reply in replies %}
    <div class="reply">{{ reply.text }}</div>
    {% endfor %}
    <form method="POST" action="/reply">
        <input type="hidden" name="idea_id" value="{{ idea.id }}">
        <input type="text" name="text" placeholder="–í–∞—à –æ—Ç–≤–µ—Ç (–¥–æ 150 —Å–∏–º–≤–æ–ª–æ–≤)..." maxlength="150" required>
        <button type="submit">üì® –û—Ç–≤–µ—Ç–∏—Ç—å</button>
    </form>
</div>
{% endblock %}